<?phpdefine("QUICK_CACHE_ALLOWED", false); define("DONOTCACHEPAGE", true); define('DONOTCACHCEOBJECT', true); define('DONOTCDN', true); if ( file_exists ( './../../../../wp-config.php' ) ){	include_once ( './../../../../wp-config.php' );}else if ( file_exists ( './../../../../../wp-config.php' ) ){	include_once ( './../../../../../wp-config.php' );}$debug = 1; $debug = apply_filters('wp_cta_st_session_check',$debug);if(session_id()=="") {    // session isn't started	//session_start();}//echo $_SESSION[$_GET['permalink_name']];if (isset($_SESSION[$_GET['permalink_name']]) && !$debug){	$url = $_SESSION[$_GET['permalink_name']];}else{	$query = "SELECT * FROM {$table_prefix}posts WHERE post_name='".$_GET['permalink_name']."' AND post_type='wp-call-to-action-group' LIMIT 1";	$result = mysql_query($query);	if (!$result){ echo $query; echo mysql_error(); exit;}	//echo mysql_num_rows($result);	$arr = mysql_fetch_array($result);	$pid = $arr['ID'];	$data = json_decode($arr['post_content'],true);	foreach ($data as $key=>$val)	{		if( $data[$key]['status']=='paused')		{						unset($data[$key]);		}	}	$data_keys = array_keys($data);	$meta_id = 'group_marker';	$old_key = get_post_meta($pid, $meta_id, true);	foreach ($data as $key=> $val)	{		if( $data[$key]['status']=='paused')		{			unset($data[$key]);		}	}	if($old_key ==''){		//echo here;		//echo "<br>";		$value = 0;		delete_post_meta($pid, $meta_id);		add_post_meta($pid, $meta_id, $value);				$wp_cta_id = $data[$data_keys[0]]['id'];			}	else	{		$count = count($data_keys);		$this_key = $old_key+1;		if ($this_key>=$count)		{			$next_key = 0;		}		else		{			$next_key = $old_key+1;		}				update_post_meta($pid, $meta_id, $next_key);		$wp_cta_id = $data[$data_keys[$next_key]]['id'];	}		$url = get_permalink($wp_cta_id);	$_SESSION[$_GET['permalink_name']] = $url;}//echo $url;exit;$page = wp_cta_remote_connect($url);//echo $page;//header("HTTP/1.1 307 Temporary Redirect");@header("Location: $url");function wp_cta_get_next($array, $key) {   $currentKey = key($array);   while ($currentKey !== null && $currentKey != $key) {       next($array);       $currentKey = key($array);   }   return next($array);}